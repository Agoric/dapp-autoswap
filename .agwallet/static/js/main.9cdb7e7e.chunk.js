(this["webpackJsonp@agoric/wallet-frontend"]=this["webpackJsonp@agoric/wallet-frontend"]||[]).push([[0],{52:function(e,t,n){e.exports=n(63)},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n(47),i=n(94),l=n(48),u=n(30),s=n.n(u),p=n(36),m=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_API_URL;function E(e){return d.apply(this,arguments)}function d(){return(d=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/vat",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.ok,n=e.res;return t?n:{}})).catch((function(e){console.log("Fetch Error",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=null;function g(e){var t=e.onConnect,n=e.onDisconnect,a=e.onMessage;f=new WebSocket(function(){var e=new URL(m||window.origin);return e.protocol="ws",e}()),t&&f.addEventListener("open",(function(){return t()})),n&&f.addEventListener("close",(function(){return n()})),a&&f.addEventListener("message",(function(e){var t=e.data;return a(t)}))}function b(){return!!f}function v(){b()&&(f.close(),f=null)}var O=function(){return{type:"ACTIVATE_CONNECTION"}},y=function(){return{type:"DEACTIVATE_CONNECTION"}},h=function(){return{type:"SERVER_CONNECTED"}},N=function(){return{type:"SERVER_DISCONNECTED"}},C=function(e){return{type:"UPDATE_PURSES",payload:e}},j=function(e){return{type:"UPDATE_INBOX",payload:e}},w=function(e){return{type:"REJECT_OFFER",payload:e}},R=function(e){return{type:"CONFIRM_OFFER",payload:e}},T=n(18);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(T.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e,t){var n=t.type,a=t.payload;switch(n){case"ACTIVATE_CONNECTION":return function(e){return D({},e,{active:!0})}(e);case"DEACTIVATE_CONNECTION":return function(e){return D({},e,{active:!1})}(e);case"SERVER_CONNECTED":return function(e){return D({},e,{connected:!0})}(e);case"SERVER_DISCONNECTED":return function(e){return D({},e,{connected:!1})}(e);case"UPDATE_PURSES":return function(e,t){return D({},e,{purses:t})}(e,a);case"UPDATE_INBOX":return function(e,t){return D({},e,{inbox:t})}(e,a);case"REJECT_OFFER":return function(e,t){return E({type:"walletDeclineOffer",data:t}),e}(e,a);case"CONFIRM_OFFER":return function(e,t){return E({type:"walletAcceptOffer",data:t}),e}(e,a);default:throw new TypeError("Action not supported ".concat(n))}},I=Object(a.createContext)();function S(){return Object(a.useContext)(I)}var _=n(37),k=n(93),x=n(83),F=n(84),U=n(28),L=n(39),V=n.n(L),B=Object(_.a)((function(e){return{appBar:{position:"relative"},title:{flexGrow:1},icon:{marginRight:e.spacing(1)}}}));function J(e){var t=e.children,n=B();return r.a.createElement(x.a,{position:"absolute",className:n.appBar},r.a.createElement(F.a,null,r.a.createElement(V.a,{className:n.icon}),r.a.createElement(U.a,{variant:"h6",color:"inherit",noWrap:!0,className:n.title},"Simple Wallet"),t))}var W=n(96),M=n(85),G=n(40),z=n.n(G),X=Object(_.a)((function(e){return{divider:{marginRight:e.spacing(2)}}}));function q(){var e=X(),t=S(),n=t.state,a=t.dispatch,c=n.active,o=n.connected,i=n.account;return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(W.a,{className:e.divider,label:i||"anonymous",avatar:r.a.createElement(z.a,null)}),c?r.a.createElement(M.a,{variant:"contained",onClick:function(){a(y())}},"Disconnect"):r.a.createElement(M.a,{variant:"contained",onClick:function(){a(O())}},"Connect"))}var H=n(66),K=n(91),Q=n(86),Y=n(97),Z=n(87),$=n(88),ee=n(41),te=n.n(ee),ne=Object(_.a)((function(e){return{icon:{minWidth:24,marginRight:e.spacing(2)}}}));function ae(){var e=ne(),t=S().state.purses;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"h6"},"Purses"),Array.isArray(t)&&t.length>0?r.a.createElement(Q.a,null,t.map((function(t){var n=t.purseName,a=t.assayId,c=t.allegedName,o=t.extent;return r.a.createElement(Y.a,{key:n,value:n,divider:!0},r.a.createElement(Z.a,{className:e.icon},r.a.createElement(te.a,null)),r.a.createElement($.a,{primary:n,secondary:"".concat(o," ").concat(a," (").concat(c,")")}))}))):r.a.createElement(U.a,{color:"inherit"},"No purses."))}var re=n(5),ce=n(27),oe=n(90),ie=n(89),le=n(95),ue=n(92),se=n(42),pe=n.n(se),me=n(45),Ee=n.n(me),de=n(46),fe=n.n(de),ge=Object(_.a)((function(e){return{icon:{margin:e.spacing(1)},buttons:{"& button ~ button":{marginLeft:e.spacing(1)}}}})),be=Object(re.a)((function(e){return{root:{color:e.palette.getContrastText(ce.a[500]),backgroundColor:ce.a[500],"&:hover":{backgroundColor:ce.a[700]}}}}))(ie.a),ve=Object(re.a)((function(e){return{root:{color:e.palette.getContrastText(oe.a[500]),backgroundColor:oe.a[500],"&:hover":{backgroundColor:oe.a[700]}}}}))(ie.a),Oe=Object(re.a)((function(e){return{root:{width:e.spacing(10),color:ce.a[800],borderColor:ce.a[800]}}}))(W.a),ye=Object(re.a)((function(e){return{root:{width:e.spacing(10),color:oe.a[800],borderColor:oe.a[800]}}}))(W.a);function he(){var e=ge(),t=S(),n=t.state,a=t.dispatch,c=n.inbox;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"h6"},"Transactions"),Array.isArray(c)&&c.length>0?r.a.createElement(Q.a,null,c.map((function(t){var n=t.instanceId,c=t.date,o=t.purseName0,i=t.purseName1,l=t.assayId0,u=t.assayId1,s=t.extent0,p=t.extent1,m=t.status;return r.a.createElement(Y.a,{key:c,value:c,divider:!0},r.a.createElement(Z.a,null,r.a.createElement(pe.a,{edge:"start",className:e.icon})),r.a.createElement(K.a,{container:!0,direction:"column"},r.a.createElement(K.a,{item:!0},r.a.createElement(U.a,{variant:"body2",display:"block"},"".concat(n," - ").concat(function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}(c)))),r.a.createElement(K.a,{item:!0},r.a.createElement(U.a,{variant:"body1"},"Pay\xa0",r.a.createElement(le.a,{component:"span",fontWeight:800},s,"\xa0",l,"\xa0"),"from\xa0",o),r.a.createElement(U.a,{variant:"body1"},"to receive\xa0",r.a.createElement(le.a,{component:"span",fontWeight:800},p,"\xa0",u,"\xa0"),"into\xa0",i))),r.a.createElement(ue.a,{className:e.buttons},"decline"===m&&r.a.createElement(Oe,{variant:"outlined",label:"Declined"}),"accept"===m&&r.a.createElement(ye,{variant:"outlined",label:"Accepted"}),!m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(be,{size:"small","aria-label":"Decline",onClick:function(){return function(e){a(w(e))}(c)}},r.a.createElement(Ee.a,null)),r.a.createElement(ve,{size:"small","aria-label":"Accept",onClick:function(){return function(e){a(R(e))}(c)}},r.a.createElement(fe.a,null)))))}))):r.a.createElement(U.a,{color:"inherit"},"No transactions."))}var Ne=Object(_.a)((function(e){return{paper:Object(T.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),title:{padding:e.spacing(0,0,4)},aside:{borderRightColor:e.palette.divider,borderRightStyle:"solid",borderRightWidth:1}}}));function Ce(){var e=Ne();return r.a.createElement(H.a,{className:e.paper},r.a.createElement(U.a,{component:"h1",variant:"h4",align:"center",className:e.title},"Wallet"),r.a.createElement(K.a,{container:!0,spacing:2},r.a.createElement(K.a,{item:!0,xs:4,className:e.aside},r.a.createElement(ae,null)),r.a.createElement(K.a,{item:!0,xs:8},r.a.createElement(he,null))))}var je=Object(_.a)((function(e){return{layout:Object(T.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1e3+2*e.spacing(2)),{width:1e3,marginLeft:"auto",marginRight:"auto"})}}));var we=Object(o.a)({palette:{primary:{main:"#AB2328"},secondary:{main:"#508AA8"}},typography:{useNextVariants:!0}});Object(c.render)(r.a.createElement((function(e){var t=e.children,n=Object(a.useReducer)(P,{active:!1,connected:!1,account:null,purses:null,inbox:null}),c=Object(l.a)(n,2),o=c[0],i=c[1],u=o.active;return Object(a.useEffect)((function(){function e(e){if(e){var t=e.type,n=e.data;"walletUpdatePurses"===t&&i(C(JSON.parse(n))),"walletUpdateInbox"===t&&i(j(JSON.parse(n)))}}u?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b()||g(e)}({onConnect:function(){i(h()),E({type:"walletGetPurses"}).then(e),E({type:"walletGetInbox"}).then(e)},onDisconnect:function(){i(N()),i(y()),i(C(null)),i(j(null))},onMessage:function(t){e(JSON.parse(t))}}):v()}),[u]),r.a.createElement(I.Provider,{value:{state:o,dispatch:i}},t)}),null,r.a.createElement(i.a,{theme:we},r.a.createElement((function(){var e=je();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement(J,null,r.a.createElement(q,null)),r.a.createElement("main",{className:e.layout},r.a.createElement(Ce,null)))}),null))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.9cdb7e7e.chunk.js.map